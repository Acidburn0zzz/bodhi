<%inherit file="master.html"/>

<script src="${request.static_url('bodhi:static/js/resize-newsfeed.js')}"></script>

<div class="row">
  <div id="newsfeed" class="col-md-6 onlyjs">
    <script id="datagrepper-widget"
            src="https://apps.fedoraproject.org/datagrepper/widget.js"
            data-category="bodhi">
    </script>
  </div>

  <div class="col-md-12 remove-cols js-md-6">

    <div class="row">
      <div class="col-md-10 col-md-offset-1 remove-cols js-md-12 sidepanel nopadding">
        <div class="panelheader clearfix">
          <h3 class="pull-left">Search Bodhi</h3>
        </div>
        <form id="search" role="search">
          <div id="bloodhound" class="form-group noui">
            <input class="typeahead form-control noui" name="term" type="text" placeholder="Search query here...">
          </div>
        </form>
      </div>
    </div>

      <div class="row">
        <div class="col-md-10 col-md-offset-1 remove-cols js-md-12 sidepanel nopadding">
          <div class="panelheader clearfix">
            <h3 class="pull-left">This week's top testers</h3>
          </div>
          <table class="table">
            % for tester, count in top_testers:
            <tr>
              <td>
                <strong>#${str(loop.index + 1)}</strong>
                <a href="${request.route_url('user', name=tester['name'])}">
                  <img class="img-circle" src="${self.util.avatar(tester['name'], size=24)}"/>
                  ${tester['name']}
                </a>
              </td>
              <td>(${str(count)})</td>
            </tr>
            % endfor
          </table>
        </div>
      </div>

      % if critpath_updates:
      <div class="row">
        <div class="col-md-10 col-md-offset-1 remove-cols js-md-12 sidepanel nopadding">
          <div class="panelheader clearfix">
            <h3 class="pull-left">Latest Critical Path Updates in Need of Testing</h3>
            <span class="pull-right">
              <a href="${request.route_url('updates')}?status=testing">
                View all
                <span class="glyphicon glyphicon-chevron-right"></span>
              </a>
            </span>
          </div>
          ${self.tables.updates(critpath_updates)}
        </div>
      </div>
      % endif

      % if security_updates:
      <div class="row">
        <div class="col-md-10 col-md-offset-1 remove-cols js-md-12 sidepanel nopadding">
          <div class="panelheader clearfix">
            <h3 class="pull-left">Latest Security Updates in Need of Testing</h3>
            <span class="pull-right">
              <a href="${request.route_url('updates')}?type=security&status=testing">
                View all
                <span class="glyphicon glyphicon-chevron-right"></span>
              </a>
            </span>
          </div>
          ${self.tables.updates(security_updates)}
        </div>
      </div>
      %endif
    </div>
  </div>
</div>
