<%inherit file="master.html"/>

<div class="row">
  <div class="col-md-3 col-md-offset-1">
    &nbsp;</br>
    % if request.user and request.user.name == user['name']:
    <form method="POST" action="https://www.libravatar.org/openid/login/">
      <input type="hidden" name="openid_identifier"
          value="http://${user['name']}.id.fedoraproject.org/"/>
      <input type="image" class="img-circle centered"
          src="${self.util.avatar(user['name'], size=256)}"
          style="outline: none;" alt="Your avatar"/>
    </form>
    % else:
    <img class="centered img-circle" src="${self.util.avatar(user['name'], size=256)}"/>
    % endif
    <h2 class="centered">${user['name']}</h2>
  </div>

  % if user['comments_on']:
  <div class="col-md-7">
    <h3>Comments on ${user['name']}'s Updates</h3>
    <ul class="linkable">
    % for comment in user['comments_on']:
      <li>${self.fragments.comment(comment)}</li>
    % endfor
    </ul>
  <span class="pull-right">
    <a href="${request.route_url('comments')}?update_owner=${user['name']}">
      View more comments on ${user['name']}'s updates
      <span class="glyphicon glyphicon-chevron-right"></span>
    </a>
  </span>
  </div>
  % endif
</div>

<div class="row">
  % if user['recent_updates']:
  <div class="col-md-5 col-md-offset-1">
    <h3>${user['name']}'s Updates</h3>
    <table class="table">
      <thead><tr>
          <th>Update</th>
          <th>Age</th>
          <th>Release(s)</th>
          <th>Status</th>
      </tr></thead>
      <tbody>
      % for update in user['recent_updates']:
      <tr>
        <td> ${self.util.update2html(update) | n} </td>
        <td>${self.util.age(update['date_submitted'])}</td>
        <td>
          <a href="${request.route_url('release', name=update['release']['name'])}">
            ${update['release']['name']}
          </a>
        </td>
        <td>${update['status']}</td>
      </tr>
      % endfor
      </tbody>
    </table>
    <span class="pull-right">
      <a href="${request.route_url('updates')}?user=${user['name']}">
        View more of ${user['name']}'s updates
        <span class="glyphicon glyphicon-chevron-right"></span>
      </a>
    </span>
  </div>
  % endif

  % if user['comments_by']:
  <div class="col-md-5">
    <h3>Comments by ${user['name']}</h3>
    <ul class="linkable">
    % for comment in user['comments_by']:
      <li>${self.fragments.comment(comment)}</li>
    % endfor
    </ul>
    <span class="pull-right">
      <a href="${request.route_url('comments')}?user=${user['name']}">
        View more comments by ${user['name']}
        <span class="glyphicon glyphicon-chevron-right"></span>
      </a>
    </span>
  </div>
  % endif
</div>
